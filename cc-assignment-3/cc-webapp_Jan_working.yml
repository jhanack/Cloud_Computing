- pip:
    name: openshift

- name: Create a k8s namespace
  k8s:
    name: group01
    api_version: v1
    kind: Namespace
    state: present

- name: Create a Deployment for backend-service
  k8s:
    state: present
    definition:  
     apiVersion: apps/v1
     kind: Deployment
     metadata:
      name: cc-backend-service
      labels:
       app: nginx
     spec:
      replicas: 6
      selector:
       matchLabels:
        app: nginx
      template:
       metadata:
        labels:
         app: nginx
       spec:
        containers:
        - name: nginx
          image: jannoh/janno:backend
          ports:
          - containerPort: 80

- name: Create a Deployment for frontend-service
  k8s:
    state: present
    definition:  
     apiVersion: apps/v1
     kind: Deployment
     metadata:
      name: cc-frontend-service
      labels:
       app: nginx
     spec:
      replicas: 4
      selector:
       matchLabels:
        app: nginx
      template:
       metadata:
        labels:
         app: nginx
       spec:
        containers:
        - name: nginx
          image: jannoh/janno:frontend
          ports:
          - containerPort: 80